<div class="container" ng-controller="Main2Ctrl">
    <div class="panel panel-default">
        <nav id="gcbc-toolbar" class="btn-toolbar">
            <div class="container">
                <div class="col-sm-6">
                    <div class="btn-group">
                        <a class="btn btn-default" data-toggle="tooltip" title="Borrar todo" ng-click="LimpiarScope()"><i class="glyphicon glyphicon-remove-circle"></i></a>
                        <a class="btn btn-default" data-toggle="tooltip" title="Descargar"><i class="glyphicon glyphicon-floppy-save"></i></a>
                        <a id="boton-colapsado" class="btn btn-default" data-toggle="tooltip" title="Collapsar / Expandir">
                            <i ng-show="!colapsados" class="fa fa-chevron-up"></i>
                            <i ng-show="colapsados" class="fa fa-chevron-down"></i>
                        </a> 
                    </div>
                
                    <div class="btn-group pull-right">
                        <a class="btn btn-default" data-toggle="tooltip" title="Nuevo free-text" ng-click="CrearFreetext()"><i class="glyphicon glyphicon-pencil"></i></a>
                        <a class="btn btn-default" data-toggle="tooltip" title="Nuevo mult-choice" ng-click="CrearMultiplechoice()"><i class="glyphicon glyphicon-minus"></i></a>
                        <a class="btn btn-default" data-toggle="tooltip" title="Nuevo mult-choice-list"><i class="glyphicon glyphicon-th-list"></i></a>
                    </div>
                </div>
                
                <div class="col-sm-6">
                    <div id="editor-buttons" class="btn-group">
                        <a class="btn btn-default disabled" data-edit="bold" title="" data-original-title="Negrita"><i class="fa fa-bold"></i></a>
                        <a class="btn btn-default disabled" data-edit="italic" title="" data-original-title="Cursiva"><i class="fa fa-italic"></i></a>
                        <a class="btn btn-default disabled" data-edit="link" title="" data-original-title="Link"><i class="fa fa-chain"></i></a>
                    </div>
                </div>
            </div>
        </nav>
    </div>



   
    <!--  CONTENIDO de las Preguntas -->

    <div id="questions-container" class="panel panel-default" ui-sortable ng-model="preguntas">
        <div class="question-wrapper" ng-repeat="pregunta in preguntas track by $index">

            <div class="questions-inside-left">
                <span class="glyphicon glyphicon-move"></span>
            </div>


            <div class="questions-inside-right">
                <header>
                   <h3>Pregunta {{$index + 1}} <i>({{pregunta.questionType}}<span ng-show="pregunta.questionType == undefined">SÃ³lo HTML</span>)</i></h3>
                    <div class="question-header-buttons">
                        <a class="question-collapse" ng-click="Collapse($index)">
                          <span class="fa fa-chevron-up"></span>
                        </a>
                        <a class="question-close" ng-click="Close($index)"><span class="fa fa-remove"></span></a>
                    </div>
                </header>
                

                <div class="question-wrap" ng-show="pregunta.questionType == undefined">
                    <span class="form-control" contenteditable="true" ng-bind-html="pregunta.prevHTML | unsafe"></span>
                </div>

                <div class="question-wrap" ng-show="pregunta.questionType != undefined && pregunta.questionType != 'multiple choice group'">
                    <span class="span-label"><b>Pregunta: </b></span>
                    <div class="input-group">
                      <span class="form-control" contenteditable="true" ng-bind-html="pregunta.questionHTML | unsafe"></span>
                      <span class="input-group-btn">
                        <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                      </span>
                    </div>
                </div>

                <!-- FreeText question -->
                <div class="container-fluid" ng-show="pregunta.questionType == 'freetext'">
                    <div class="col-sm-4">
                        <textarea class="form-control" placeholder="Respuesta..." ng-model="pregunta.correctAnswerString"></textarea>
                    </div>
                    <div class="col-sm-4">
                        <div class="input-group">
                           <textarea class="form-control" ng-model="pregunta.correctAnswerOutput" placeholder="Feedback OK..."></textarea>
                           <span class="input-group-btn">
                            <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                          </span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                       <div class="input-group">
                           <textarea class="form-control" ng-model="pregunta.incorrectAnswerOutput" placeholder="Feedback Mal..."></textarea>
                           <span class="input-group-btn">
                            <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                          </span>
                        </div>
                    </div>
                </div>


                <!-- Multiple choice question -->
                <div class="container-fluid multiple-choice-wrap" ng-show="pregunta.questionType == 'multiple choice'">
                    <span class="span-label"><b>Respuestas: </b></span>
                   <ol>
                       <li class="choice-animation" ng-repeat="choice in pregunta.choices track by $index">
                          <span class="num-list"></span>
                           <ul>
                               <li>
                                   <textarea class="form-control" type="text" placeholder="Texto..." ng-model="choice[0]"></textarea>
                               </li>
                               <li>
                                  <div class="input-group">
                                   <textarea class="form-control" type="text" placeholder="Salida..." ng-model="choice[2]"></textarea>
                                   <span class="input-group-btn">
                                      <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                                  </span>
                                </div>
                                   
                               </li>
                               <li><input type="checkbox" ng-model="choice[1]"> Correcta <span class="close-choice fa fa-remove" ng-click="CloseChoice($parent.$index, $index)"></span></li>
                           </ul>
                       </li>
                       <span class="add-question fa fa-plus" ng-click="AddChoice($index)"></span>
                   </ol>
                </div>


                <!-- Group multiple choice question -->
                <div class="container-fluid multiple-choice-group-wrap" ng-show="pregunta.questionType == 'multiple choice group'">
                    <!-- Enunciado -->
                    <div class="question-wrap">
                        <span class="span-label"><b>Enunciado: </b></span>
                        <div class="input-group">
                          <span class="form-control" contenteditable="true" ng-bind-html="pregunta.questionHTML | unsafe"></span>
                          <span class="input-group-btn">
                            <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                          </span>
                        </div>
                    </div>
                    
                    <!-- Feedback and minCorrectAnswers -->
                    <div class="container-fluid">
                        <div class="col-sm-5">
                            <div class="input-group">
                               <textarea class="form-control" placeholder="Feedback OK..." ng-model="pregunta.allCorrectOutput"></textarea>
                               <span class="input-group-btn">
                                <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                              </span>
                            </div>
                        </div>
                        <div class="col-sm-5">
                            <div class="input-group">
                               <textarea class="form-control" ng-model="pregunta.someIncorrectOutput" placeholder="Feedback Wrong..."></textarea>
                               <span class="input-group-btn">
                                <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                              </span>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <input type="number" min="1" max="{{pregunta.questionsList.length}}" step="1" class="form-control" ng-model="pregunta.allCorrectMinCount" placeholder="1"></input>
                        </div>
                    </div>
                    
                    
                    <!-- Bloque de Single multiple choice  -->
                    <div class="row inner-sortable" ui-sortable ng-model="pregunta.questionsList">
                        <div class="question-wrapper" ng-repeat="question in pregunta.questionsList track by $index">
                            <div class="inner-questions-inside-left">
                                <span class="glyphicon glyphicon-move"></span>
                            </div>
                            
                            <div class="questions-inside-right">
                               <div class="question-wrap">
                                    <span class="span-label"><b>Pregunta {{ $index + 1 }}: </b></span>
                                    <div class="input-group">
                                      <span class="form-control" contenteditable="true" ng-bind-html="question.questionHTML | unsafe"></span>
                                      <span class="input-group-btn">
                                        <a class="btn editar" type="button"><span class="fa fa-edit"></span></a>
                                      </span>
                                    </div>
                                </div>
                                
                                
                                <div class="container-fluid multiple-choice-wrap">
                                    
                                    <div class="span-label"><b>Respuestas: </b></div>
                                    <div class="multiselect">
                                        <b>Multi-seleccionable: </b>
                                        <div class="my-checkbox">
                                            <input type="checkbox" ng-checked="question.multiSelect | isUndefined">
                                            <label></label>
                                        </div>
                                    </div>
                                   <ol>
                                       <li class="choice-animation" ng-repeat="qchoice in question.choices track by $index">
                                          <span class="num-list"></span>
                                           <ul>
                                               <li>
                                                   <textarea class="form-control" type="text" placeholder="Texto..." ng-model="qchoice"></textarea>
                                               </li>
                                               <li>
                                                    <div class="my-checkbox">
                                                       <input type="checkbox" value="None" name="check" ng-checked="IsInArray($parent.$parent.$index, $parent.$index, $index)" ng-click="Marcar($parent.$parent.$index, $parent.$index, $index)"> 
                                                       <label></label>
                                                    </div>Correcta 
                                                   
                                                   <span class="close-choice fa fa-remove" ng-click="InnerCloseChoice($parent.$parent.$index, $parent.$index, $index)"></span>
                                               </li>
                                           </ul>
                                       </li>
                                       <span class="add-question fa fa-plus" ng-click="InnerAddChoice($parent.$index, $index)"></span>
                                   </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
           
            </div>

        </div>
    </div>
    
    <pre>{{preguntas | json}}</pre>
    
</div>


