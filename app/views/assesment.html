<div class="container" ng-controller="Main2Ctrl">
   
   <div id="bloque-msg">
       <div ng-if="preguntasEx.length == 0" class="bq-msg alert alert-info">
           <span>Inserta preguntasEx mediante los botones </span> 
            <div class="btn-group" style="margin: 0 15px;">
               <a class="btn btn-default"><i class="fa fa-header"></i></a>
                <a class="btn btn-default"><i class="glyphicon glyphicon-pencil"></i></a>
                <a class="btn btn-default"><i class="glyphicon glyphicon-minus"></i></a>
                <a class="btn btn-default"><i class="glyphicon glyphicon-th-list"></i></a>
            </div>
            <span>de la barra de herramientas.</span> 
       </div>
   </div>
 
    <div class="panel panel-default" style="background: #eee">
        <nav id="gcbc-toolbar" class="btn-toolbar">
            <div class="container">
                <div class="col-sm-12">
                    <div class="btn-group">
                        <a class="btn btn-default" data-toggle="tooltip" title="Borrar todo" ng-click="LimpiarScope()"><i class="glyphicon glyphicon-remove-circle"></i></a>
                        <a class="btn btn-default" ng-click="HacerPeticion()" data-toggle="tooltip" title="Descargar"><i class="glyphicon glyphicon-floppy-save"></i></a>
                        <a id="boton-colapsado" class="btn btn-default" data-toggle="tooltip" title="Collapsar / Expandir">
                            <i ng-show="!colapsados" class="fa fa-chevron-up"></i>
                            <i ng-show="colapsados" class="fa fa-chevron-down"></i>
                        </a>
                    </div>
                    
                    <div class="btn-group">
                       <a class="btn btn-default" data-toggle="tooltip" title="Nuevo HTML" ng-click="CrearHTML(-1)"><i class="fa fa-header"></i></a>
                        <a class="btn btn-default" data-toggle="tooltip" title="Nuevo free-text" ng-click="CrearFreetext(-1)"><i class="glyphicon glyphicon-pencil"></i></a>
                        <a class="btn btn-default" data-toggle="tooltip" title="Nuevo mult-choice" ng-click="CrearMultiplechoice(-1)"><i class="glyphicon glyphicon-minus"></i></a>
                        <a class="btn btn-default" data-toggle="tooltip" title="Nuevo mult-choice-list" ng-click="CrearMultiplechoiceGroup(-1)"><i class="glyphicon glyphicon-th-list"></i></a>
                    </div>
                    
                    <div id="editor-buttons" class="btn-group">
                        <a class="btn btn-default disabled" data-edit="bold" title="" data-original-title="Negrita"><i class="fa fa-bold"></i></a>
                        <a class="btn btn-default disabled" data-edit="italic" title="" data-original-title="Cursiva"><i class="fa fa-italic"></i></a>
                        <a class="btn btn-default disabled" data-edit="link" title="" data-original-title="Link"><i class="fa fa-chain"></i></a>
                    </div>
                </div>
            </div>
        </nav>
    </div>

  
   <!-- TITULO -->
    <div id="bloque-titulo" ng-model="titulo" ng-class="{'has-success' : !titulo.error && titulo.success , 'has-error' : titulo.error && !titulo.success}">
        <input type="text" class="form-control" ng-model="titulo.text" placeholder="Titulo... (activity-X.X)" ng-keyup="ComprobarTitulo()">
        <div class="error-container" ng-if="titulo.error">
            <small class="help-block">Formato incorrecto. Debe ser "activity-X.X" donde las X son "tema.actividad"</small>
        </div>
    </div>
    
    
    <div id="contenedor-asses" class="panel panel-default">
        <!-- GENERAL -->
        <div id="general-asses">
           <div>
               <span><b>Pre√°mbulo: </b></span>
               <div class="input-group">
                    <span class="form-control" contenteditable="true" ng-bind-html="preguntasEx.preamble | unsafe" ng-model="preguntasEx.preamble"></span>
                    <span class="input-group-btn">
                        <a class="btn editar" ng-click="Editar($event, 'preguntasEx.preamble', $index)"><span class="fa fa-edit"></span></a>
                    </span>
                </div>
           </div>
           <div>
               <span><b>Auto-corregir: </b></span>
               <div class="my-checkbox" ng-click="MarcarCheckAnswers()">
                    <input type="checkbox" ng-model="preguntasEx.checkAnswers">
                    <label></label>
                </div>
           </div>
        </div>
        
        
        
        <!--  CONTENIDO de las Preguntas -->
        <div id="questions-container" ui-sortable ng-model="preguntasEx"> 
           
            <div ng-repeat="pregunta in preguntasEx track by $index" on-finish-render>
               
              <!--  INSERT QUESTION  -->
              <div class="insert-question">
                  <div> 
                     <a class="open-popover" tabindex="0" data-toggle="popover"><span class="fa fa-plus"></span></a>
                     
                      <div class="btn-group hide">
                           <a class="btn btn-default" data-toggle="tooltip" title="Nuevo HTML" ng-click="CrearHTML({{$index}})"><i class="fa fa-header"></i></a>
                            <a class="btn btn-default" data-toggle="tooltip" title="Nuevo free-text" ng-click="CrearFreetext({{$index}})"><i class="glyphicon glyphicon-pencil"></i></a>
                            <a class="btn btn-default" data-toggle="tooltip" title="Nuevo mult-choice" ng-click="CrearMultiplechoice({{$index}})"><i class="glyphicon glyphicon-minus"></i></a>
                            <a class="btn btn-default" data-toggle="tooltip" title="Nuevo mult-choice-list" ng-click="CrearMultiplechoiceGroup({{$index}})"><i class="glyphicon glyphicon-th-list"></i></a>
                      </div>
                  </div>
              </div>
               
              <!--  QUESTION  -->           
                <div class="question-wrapper" ng-class="{ 'colapsado': pregunta.colapsado }">
                    <div class="questions-inside-left">
                        <span class="glyphicon glyphicon-move"></span>
                    </div>
                
                 
                  <!-- Pregunta -->
                    <div class="questions-inside-right">
                        <header>
                           <h3>Pregunta {{$index + 1}}</h3>
                            <div class="question-header-buttons">
                                <a class="question-collapse" ng-click="Collapse($index)">
                                  <span class="fa" ng-class="{'fa-chevron-down': pregunta.colapsado , 'fa-chevron-up': !pregunta.colapsado }"></span>
                                </a>
                                <a class="question-close" ng-click="Close($index)"><span class="fa fa-remove"></span></a>
                            </div>
                        </header>
                        
                
                    <!-- PREGUNTA en general -->
                        <div class="question-wrap" ng-if="pregunta.questionType != undefined && pregunta.questionType != 'multiple choice group'">
                            <span class="span-label"><b>Pregunta: </b></span>
                            <div class="input-group ">
                              <span class="form-control" contenteditable="true" ng-bind-html="pregunta.questionHTML | unsafe" ng-model="pregunta.questionHTML"></span>
                              <span class="input-group-btn">
                                <a class="btn editar" ng-click="Editar($event, 'preguntasEx[{{$index}}].questionHTML', $index)"><span class="fa fa-edit"></span></a>
                              </span>
                            </div>
                        </div>
                
                        
                
                
                        
                
                
                   
                    </div>
                
                </div>
            </div>
        </div>
    </div>
   
    <pre>{{preguntasEx | json}}</pre>
    
</div>